<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Panel Admin E-Voting</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 40px;
    }

    .container {
      max-width: 700px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    h2 {
      text-align: center;
    }

    h3 {
      margin-top: 30px;
    }

    input, textarea {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
      font-size: 14px;
    }

    button {
      padding: 10px 15px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 5px;
    }

    button:hover {
      background: #1d4ed8;
    }

    .logout {
      background: #dc2626;
      float: right;
    }

    hr {
      margin: 25px 0;
    }
  </style>
</head>

<body>

<div class="container">

<h2>Panel Admin E-Voting</h2>
<button class="logout" id="logout">Logout</button>

<hr>

<h3>Tambah Pemilih</h3>
<input id="pNama" placeholder="Nama Pemilih">
<input id="pEmail" placeholder="Email Pemilih">
<input id="pPassword" placeholder="Password Pemilih">
<button onclick="tambahPemilih()">Tambah Pemilih</button>
<h3>Daftar Pemilih</h3>

<table border="1" cellpadding="8">
  <thead>
    <tr>
      <th>Nama</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody id="listPemilih"></tbody>
</table>

<hr>

<h3>Tambah Kandidat</h3>
<input id="kNama" placeholder="Nama Kandidat">
<textarea id="kVisi" placeholder="Visi & Misi"></textarea>
<button onclick="tambahKandidat()">Tambah Kandidat</button>

</div>

<script type="module" src="admin.js"></script>
  import { getDocs } from
"https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
async function loadPemilih() {
  const tbody = document.getElementById("listPemilih");
  tbody.innerHTML = "";

  const snap = await getDocs(collection(db, "pemilih"));
  snap.forEach(docu => {
    const data = docu.data();
    tbody.innerHTML += `
      <tr>
        <td>${data.nama}</td>
        <td>
          ${data.sudahMemilih ? "✅ Sudah Memilih" : "❌ Belum Memilih"}
        </td>
      </tr>
    `;
  });
}
loadPemilih();
window.addPemilih = async () => {
  const email=pemail.value, pass=ppass.value, nama=pnama.value;
  const u = await createUserWithEmailAndPassword(auth,email,pass);
  await setDoc(doc(db,"pemilih",u.user.uid),{
    nama, sudahMemilih:false
  });
  alert("Pemilih ditambahkan");
  loadPemilih();
};

</body>

</html>



